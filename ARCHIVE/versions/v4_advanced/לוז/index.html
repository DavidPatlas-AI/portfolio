<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>住  0</title>
    <link rel="stylesheet" href="css/styles.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Varela+Round&display=swap">
    <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body {
            background: #232526;
            color: #e0ffe0;
            font-family: 'Varela Round', Arial, sans-serif;
            direction: rtl;
            margin: 0;
            min-height: 100vh;
        }
        header#status-bar {
            background: rgba(20,40,20,0.7);
            color: #00ff99;
            box-shadow: 0 0 20px #00ff99;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            font-size: 1.1em;
        }
        button {
            background: rgba(30,60,30,0.8);
            color: #e0ffe0;
            border: none;
            border-radius: 1.5em;
            box-shadow: 0 0 10px #00ff99, 0 0 2px #fff inset;
            padding: 1em 2em;
            margin: 0.5em;
            font-size: 1.1em;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        button:hover {
            transform: scale(1.07) rotate(-2deg);
            box-shadow: 0 0 30px #00ff99, 0 0 10px #fff inset;
        }
        .button-pair {
            display: flex;
            justify-content: center;
            gap: 1em;
            margin: 1em 0;
        }
        .result {
            min-height: 2em;
            margin-top: 0.5em;
            color: #fff;
            background: rgba(0,0,0,0.2);
            border-radius: 1em;
            padding: 0.5em 1em;
            box-shadow: 0 0 8px #00ff99 inset;
        }
        #progress-bar-outer {
            width: 100%;
            height: 1.5em;
            background: #222;
            border-radius: 1em;
            margin: 0.5em 0;
            overflow: hidden;
            box-shadow: 0 0 10px #00ff99 inset;
        }
        #progress-bar-inner {
            height: 100%;
            background: linear-gradient(90deg, #00ff99, #ffeb3b);
            width: 0%;
            transition: width 0.7s;
        }
        #stars {
            font-size: 2em;
            color: #ffeb3b;
            margin: 0.5em 0;
        }
        nav#side-menu {
            position: fixed;
            right: -180px;
            top: 60px;
            width: 160px;
            background: rgba(20,40,20,0.85);
            border-radius: 1em 0 0 1em;
            box-shadow: 0 0 20px #00ff99;
            z-index: 1000;
            transition: right 0.4s cubic-bezier(.68,-0.55,.27,1.55);
            display: flex;
            flex-direction: column;
            gap: 0.5em;
            padding: 1em 0.5em;
        }
        nav#side-menu.open { right: 0; }
        #menu-toggle {
            position: fixed;
            right: 10px;
            top: 10px;
            z-index: 1100;
            background: #00ff99;
            color: #222;
            border: none;
            border-radius: 50%;
            width: 2.5em;
            height: 2.5em;
            font-size: 1.5em;
            box-shadow: 0 0 10px #00ff99;
            cursor: pointer;
            transition: background 0.2s;
        }
        #menu-toggle:hover { background: #ff0044; color: #fff; }
        nav#side-menu button {
            background: none;
            color: #e0ffe0;
            border: none;
            font-size: 1.1em;
            padding: 0.5em 0;
            text-align: right;
            cursor: pointer;
            transition: color 0.2s, transform 0.2s;
        }
        nav#side-menu button:hover {
            color: #ffeb3b;
            transform: scale(1.08) translateX(-5px);
            text-shadow: 0 0 8px #00ff99;
        }
        header {
            text-align: center;
            margin-top: 30px;
        }
        h1 {
            color: #00ff00;
            text-shadow: 0 0 10px #00ff00;
        }
        section {
            margin: 30px 0;
        }
        .explosive {
            background: #ff2222;
            color: #fff;
            border: 2px solid #ff2222;
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 20px;
        }
        .explosive.exploded {
            animation: explode 0.5s;
            background: #fff;
            color: #ff2222;
        }
        @keyframes explode {
            0% { transform: scale(1); }
            50% { transform: scale(1.3) rotate(10deg); }
            100% { transform: scale(0.8) rotate(-10deg); }
        }
        .bus-stop {
            background-color: #001f1f;
            border: 2px solid #00ffcc;
            padding: 20px;
            border-radius: 12px;
            display: inline-block;
            margin-top: 10px;
        }
        .bus-line {
            font-size: 24px;
            font-weight: bold;
            color: #ffdd00;
        }
        .bus-time {
            font-size: 18px;
            margin-top: 10px;
            color: #00ffcc;
        }
        .feature-result {
            margin-top: 10px;
            padding: 12px;
            background: rgba(0,255,180,0.08);
            border-radius: 12px;
            min-height: 200px;
            color: #fff;
            font-size: 1.1em;
            box-shadow: 0 0 8px #00ffb055;
            text-align: center;
            transition: all 0.2s;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .feature-result img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            transition: transform 0.3s ease;
        }
        .feature-result img:hover {
            transform: scale(1.05);
        }
        .glass-btn {
            background: rgba(30,60,30,0.8);
            color: #e0ffe0;
            border: none;
            border-radius: 1.5em;
            box-shadow: 0 0 10px #00ff99, 0 0 2px #fff inset;
            padding: 1em 2em;
            margin: 0.5em;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.2s;
        }
        .glass-btn:hover {
            transform: scale(1.07) rotate(-2deg);
            box-shadow: 0 0 30px #00ff99, 0 0 10px #fff inset;
        }
        .image-display {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin: 20px auto;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(0,255,153,0.3);
            background: rgba(0,0,0,0.2);
        }
        .image-display img {
            width: 100%;
            height: auto;
            display: block;
            transition: opacity 0.3s ease;
        }
        .image-display img:hover {
            transform: scale(1.05);
        }
        .image-display::before {
            content: '注 转...';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #00ff99;
            display: none;
        }
        .image-display.loading::before {
            display: block;
        }
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 15px 25px;
            background: rgba(0,255,153,0.2);
            border: 1px solid #00ff99;
            border-radius: 10px;
            color: #fff;
            z-index: 1000;
            animation: slideIn 0.3s ease;
        }
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        .modal-dialog {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(20,40,20,0.95);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 0 30px #00ff99;
            z-index: 1000;
        }
        .daily-schedule {
            background: rgba(0,255,153,0.1);
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
        }
        .schedule-item {
            display: flex;
            gap: 20px;
            padding: 10px;
            border-bottom: 1px solid rgba(0,255,153,0.2);
        }
        .time {
            font-weight: bold;
            color: #00ff99;
        }
        .task-item {
            background: rgba(0,255,153,0.1);
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            transition: all 0.3s;
        }
        .task-item.completed {
            background: rgba(0,255,153,0.3);
            opacity: 0.7;
        }
        .task-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
        }
        .progress-container {
            width: 100%;
            height: 20px;
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #00ff99, #00ffcc);
            width: 0;
            transition: width 0.5s ease;
        }
        .tree-list {
            list-style: none;
            padding-right: 20px;
        }
        .tree-button {
            background: rgba(30,60,30,0.8);
            color: #e0ffe0;
            border: none;
            border-radius: 1em;
            padding: 0.5em 1em;
            margin: 0.3em 0;
            cursor: pointer;
            transition: all 0.2s;
        }
        .tree-button:hover {
            background: rgba(40,80,40,0.9);
            transform: translateX(-5px);
        }
        .leaf-list {
            list-style: none;
            padding: 10px;
            margin: 5px 0;
            background: rgba(0,255,153,0.1);
            border-radius: 8px;
        }
        .leaf-list li {
            padding: 5px;
            color: #e0ffe0;
        }
        .bus-station {
            background: rgba(0,40,40,0.8);
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
            box-shadow: 0 0 15px rgba(0,255,153,0.3);
        }
        .station-info {
            text-align: center;
        }
        .bus-lines {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 15px;
        }
        .bus-line {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background: rgba(0,255,153,0.1);
            border-radius: 8px;
        }
        .bus-number {
            font-size: 1.2em;
            font-weight: bold;
            color: #00ff99;
        }
        .bus-time {
            color: #fff;
        }
        .station-display {
            background: rgba(0,40,40,0.8);
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
            box-shadow: 0 0 15px rgba(0,255,153,0.3);
            transition: opacity 0.3s ease;
        }
        .station-info {
            color: #fff;
        }
        .station-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(0,255,153,0.3);
        }
        .bus-number {
            font-size: 1.5em;
            font-weight: bold;
            color: #00ff99;
        }
        .arrival-time {
            font-size: 1.2em;
            color: #00ffcc;
        }
        .station-details {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .destination, .location {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            background: rgba(0,255,153,0.1);
            border-radius: 8px;
        }
        .destination i, .location i {
            color: #00ff99;
        }
        .button-pair {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 15px 0;
        }
        .glass-btn {
            background: rgba(30,60,30,0.8);
            color: #e0ffe0;
            border: none;
            border-radius: 1.5em;
            box-shadow: 0 0 10px #00ff99, 0 0 2px #fff inset;
            padding: 1em 2em;
            margin: 0.5em;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.2s;
        }
        .glass-btn:hover {
            transform: scale(1.07) rotate(-2deg);
            box-shadow: 0 0 30px #00ff99, 0 0 10px #fff inset;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            z-index: 1000;
        }
        .modal-content {
            background-color: #1a1a1a;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 600px;
            border-radius: 10px;
            position: relative;
            color: #fff;
        }
        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .close-button:hover {
            color: #fff;
        }
        .jerusalem-section {
            text-align: center;
            margin: 20px 0;
        }
        .main-image {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            margin: 15px 0;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .image-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 10px 0;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            z-index: 1000;
        }
        .modal-content {
            background-color: #1a1a1a;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 600px;
            border-radius: 10px;
            position: relative;
        }
        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .close-button:hover {
            color: #fff;
        }
    </style>
</head>
<body class="dark-theme">
    <div class="background-glass"></div>
    
    <!-- Status Bar -->
    <header id="status-bar">
        <div class="status-item" id="weather-display"></div>
        <div class="status-item">
            <i class="fa-solid fa-star"></i>
            <span id="achievement-count">0</span> <span data-translate="achievements">砖</span>
        </div>
        <div class="status-item">
            <i class="fa-solid fa-fire"></i>
            <span id="streak-count">0</span> <span data-translate="streak"> 专爪驻</span>
        </div>
    </header>

    <!-- Jerusalem Images Section -->
    <div class="jerusalem-section">
        <div class="title-container">
            <h2>转转 专砖</h2>
        </div>
        <img id="mainImage" src="/assets/images/jerusalem/1.jpeg" alt="转转 专砖" class="main-image">
        <div class="image-controls">
            <button onclick="showPreviousImage()">拽</button>
            <button onclick="showNextImage()"></button>
            <button onclick="showRandomImage()">专</button>
        </div>
    </div>

    <header>
        <h1><i class="fa-solid fa-user-astronaut"></i> 住  0</h1>
        <div class="welcome-section">
            <span id="typed-welcome"></span>
        </div>
        <nav class="main-nav">
            <button class="tab-btn active" data-tab="daily" data-translate="daily">注 </button>
            <button class="tab-btn" data-tab="personal" data-translate="personal">爪 砖</button>
            <button class="tab-btn" data-tab="transport" data-translate="transport">转专 砖抓</button>
            <button class="tab-btn" data-tab="system" data-translate="system">注专转</button>
            <button class="tab-btn" data-tab="schedule" data-translate="schedule">" </button>
            <button class="tab-btn" data-tab="academic" data-translate="academic">砖转 转</button>
            <button class="tab-btn" data-tab="tree" data-translate="buttonTree">注抓 驻转专</button>
            <button class="tab-btn" data-tab="settings" data-translate="settings"><i class="fa-solid fa-gear"></i> 专转</button>
        </nav>
    </header>
    <main>
        <!-- 注  -->
        <section class="tab-content" id="tab-daily">
            <div class="feature-block">
                <div class="feature-title">
                    <i class="fa-solid fa-camera"></i> 转转 专砖
                </div>
                <div class="button-pair">
                    <button onclick="showRandomJerusalemImage()">转 专转</button>
                    <button onclick="showNextJerusalemImage()">转 </button>
                </div>
                <div class="feature-result">
                    <img src="project/assets/images/jerusalem/1.jpeg" alt="转转 专砖" onerror="handleImageError(this)">
                </div>
            </div>

            <div class="feature-block">
                <div class="feature-title" data-translate="stations"><i class="fa-solid fa-building-flag"></i> 转转</div>
                <div class="button-pair">
                    <button class="glass-btn" onclick="handleStationClick('next')" class="glass-btn">
                        <i class="fa-solid fa-forward"></i> 转 
                    </button>
                    <button class="glass-btn" onclick="handleStationClick('random')" class="glass-btn">
                        <i class="fa-solid fa-shuffle"></i> 转 拽专转
                    </button>
                </div>
                <div class="station-display">
                    <div class="station-info">
                        <div class="bus-number">---</div>
                        <div class="bus-destination">---</div>
                        <div class="bus-time">--:--</div>
                    </div>
                </div>
            </div>

            <div class="feature-block">
                <div class="feature-title"><i class="fa-solid fa-book"></i>   ?</div>
                <div class="button-pair">
                    <button class="glass-btn" onclick="showContent('learning', 'random', this)">
                        <i class="fa-solid fa-shuffle"></i> 专
                    </button>
                    <button class="glass-btn" onclick="showContent('learning', 'ordered', this)">
                        <i class="fa-solid fa-list-ol"></i> 驻 住专
                    </button>
                </div>
                <div class="feature-result"></div>
            </div>
            <div class="feature-block">
                <div class="feature-title"><i class="fa-solid fa-mug-hot"></i>  砖转转?</div>
                <div class="button-pair">
                    <button class="glass-btn" onclick="showContent('drink', 'random', this)">
                        <i class="fa-solid fa-shuffle"></i> 专
                    </button>
                    <button class="glass-btn" onclick="showContent('drink', 'ordered', this)">
                        <i class="fa-solid fa-list-ol"></i> 驻 住专
                    </button>
                </div>
                <div class="feature-result"></div>
            </div>
            <div class="feature-block">
                <div class="feature-title"><i class="fa-solid fa-shirt"></i>  砖?</div>
                <div class="button-pair">
                    <button class="glass-btn" onclick="showContent('clothing', 'random', this)">
                        <i class="fa-solid fa-shuffle"></i> 专
                    </button>
                    <button class="glass-btn" onclick="showContent('clothing', 'ordered', this)">
                        <i class="fa-solid fa-list-ol"></i> 驻 住专
                    </button>
                </div>
                <div class="feature-result"></div>
            </div>
            <div class="feature-block">
                <div class="feature-title"><i class="fa-solid fa-bolt"></i> 砖 转</div>
                <div class="button-pair">
                    <button class="glass-btn" onclick="showContent('task', 'random', this)">
                        <i class="fa-solid fa-shuffle"></i> 专
                    </button>
                    <button class="glass-btn" onclick="showContent('task', 'ordered', this)">
                        <i class="fa-solid fa-list-ol"></i> 驻 住专
                    </button>
                </div>
                <div class="feature-result"></div>
            </div>
            <div class="feature-block">
                <div class="feature-title"><i class="fa-solid fa-face-smile"></i> 爪 专</div>
                <div class="button-pair">
                    <button class="glass-btn" onclick="showContent('mood', 'random', this)">
                        <i class="fa-solid fa-shuffle"></i> 专
                    </button>
                    <button class="glass-btn" onclick="showContent('mood', 'ordered', this)">
                        <i class="fa-solid fa-list-ol"></i> 驻 住专
                    </button>
                </div>
                <div class="feature-result"></div>
            </div>
            <div class="feature-block">
                <div class="feature-title"><i class="fa-solid fa-bed"></i> 爪 注驻转</div>
                <div class="button-pair">
                    <button class="glass-btn" onclick="showContent('tired', 'random', this)">
                        <i class="fa-solid fa-shuffle"></i> 专
                    </button>
                    <button class="glass-btn" onclick="showContent('tired', 'ordered', this)">
                        <i class="fa-solid fa-list-ol"></i> 驻 住专
                    </button>
                </div>
                <div class="feature-result">
                    <div class="energy-bar-bg">
                        <div class="energy-bar" id="energyLevel"></div>
                    </div>
                </div>
            </div>
            <div class="feature-block">
                <div class="feature-title"><i class="fa-solid fa-gift"></i> 驻转注 转</div>
                <div class="button-pair">
                    <button class="glass-btn" onclick="showContent('surprise', 'random', this)">
                        <i class="fa-solid fa-shuffle"></i> 专
                    </button>
                    <button class="glass-btn" onclick="showContent('surprise', 'ordered', this)">
                        <i class="fa-solid fa-list-ol"></i> 驻 住专
                    </button>
                </div>
                <div class="feature-result"></div>
            </div>
        </section>
        <!-- 爪 砖 -->
        <section class="tab-content" id="tab-personal">
            <div class="feature-block">
                <div class="feature-title"><i class="fa-solid fa-question"></i>   注砖 转 ?</div>
                <div class="button-pair">
                    <button class="glass-btn" onclick="showContent('why', 'random', this)">
                        <i class="fa-solid fa-shuffle"></i> 专
                    </button>
                    <button class="glass-btn" onclick="showContent('why', 'ordered', this)">
                        <i class="fa-solid fa-list-ol"></i> 驻 住专
                    </button>
                </div>
                <div class="feature-result"></div>
            </div>
            <div class="feature-block">
                <div class="feature-title"><i class="fa-solid fa-house"></i> 驻  专?</div>
                <div class="button-pair">
                    <button class="glass-btn" onclick="showLocationWithImage('home')">
                        <i class="fa-solid fa-image"></i> 爪 拽 转
                    </button>
                </div>
                <div class="feature-result">
                    <div class="location-info"></div>
                    <div class="media-container"></div>
                </div>
            </div>
            <div class="feature-block sod-container">
                <div class="feature-title"><i class="fa-solid fa-bomb"></i> SOD</div>
                <button class="explosive" onclick="triggerSOD()">
                    <i class="fa-solid fa-explosion"></i> 驻注 SOD
                </button>
                <div class="feature-result">
                    <div class="sod-animation"></div>
                    <div class="sod-result"></div>
                </div>
            </div>
            <div class="mood-tracker">
                <h3><i class="fa-solid fa-face-smile"></i> 注拽 爪 专</h3>
                <canvas id="moodChart"></canvas>
                <div class="mood-buttons">
                    <button class="mood-btn" onclick="trackMood('砖专', 10)"></button>
                    <button class="mood-btn" onclick="trackMood('', 8)"></button>
                    <button class="mood-btn" onclick="trackMood('专', 5)"></button>
                    <button class="mood-btn" onclick="trackMood('注爪', 3)"></button>
                    <button class="mood-btn" onclick="trackMood('转住', 1)"></button>
                </div>
            </div>
            <div class="timer-container">
                <h3><i class="fa-solid fa-clock"></i> 专</h3>
                <div class="timer-display">25:00</div>
                <div class="timer-controls">
                    <button class="glass-btn" onclick="startTimer(1500, document.querySelector('.timer-display'))">
                        <i class="fa-solid fa-play"></i> 转
                    </button>
                    <button class="glass-btn" onclick="startTimer(300, document.querySelector('.timer-display'))">
                        <i class="fa-solid fa-coffee"></i> 驻住拽 拽爪专
                    </button>
                </div>
            </div>
            <div class="achievements-container">
                <h3><i class="fa-solid fa-trophy"></i> 砖</h3>
                <div id="achievements-list"></div>
            </div>
        </section>
        <!-- 转专 砖抓 -->
        <section class="tab-content" id="tab-transport">
            <div class="feature-block">
                <div class="feature-title"><i class="fa-solid fa-bus"></i> 转转</div>
                <div class="button-pair">
                    <button onclick="updateStationDisplay('random')" class="glass-btn">
                        <i class="fa-solid fa-shuffle"></i> 转 拽专转
                    </button>
                    <button onclick="updateStationDisplay('next')" class="glass-btn">
                        <i class="fa-solid fa-forward"></i> 转 
                    </button>
                </div>
                <div class="bus-station">
                    <!-- 转 转 转住祝  转 -->
                </div>
            </div>
            <div class="feature-block">
                <div class="feature-title"><i class="fa-solid fa-train"></i> 专转 </div>
                <div class="time-machine">
                    <div class="button-pair">
                        <button class="glass-btn" onclick="timeTravel('random')">
                            <i class="fa-solid fa-clock"></i> 拽驻爪 专转
                        </button>
                        <button class="glass-btn" onclick="timeTravel('sequential')">
                            <i class="fa-solid fa-timeline"></i> 拽驻爪 
                        </button>
                    </div>
                    <div class="feature-result">
                        <div class="time-display"></div>
                        <div class="media-container"></div>
                    </div>
                </div>
            </div>
        </section>
        <!-- 注专转 -->
        <section class="tab-content" id="tab-system">
            <div class="feature-block">
                <div class="feature-title"><i class="fa-solid fa-tree"></i> 注抓 驻转专</div>
                <div class="button-tree" id="buttonTree">
                    <!-- Tree structure will be populated by JS -->
                </div>
            </div>
            <div class="feature-block">
                <div class="feature-title"><i class="fa-solid fa-calendar-day"></i> 爪 转   砖</div>
                <button class="glass-btn full-width" onclick="showFullDay()">
                    <i class="fa-solid fa-calendar-check"></i> 爪 住 
                </button>
                <div class="feature-result">
                    <div class="daily-summary"></div>
                    <div class="media-container"></div>
                </div>
            </div>
            <div class="feature-block">
                <div class="feature-title"><i class="fa-solid fa-chart-line"></i> 转拽转</div>
                <div class="progress-container">
                    <div class="progress-bar" id="progress-bar-inner"></div>
                </div>
                <div class="progress-stats">
                    <div>砖转 砖砖: <span id="completed-tasks">0</span></div>
                    <div>住  砖转: <span id="total-tasks">0</span></div>
                </div>
            </div>
        </section>
        <!-- "  -->
        <section class="tab-content" id="tab-schedule">
            <h2><i class="fa-solid fa-calendar-alt"></i> " </h2>
            <div class="schedule-container">
                <div class="schedule-header">
                    <h3><i class="fa-solid fa-calendar"></i> " </h3>
                    <div class="schedule-controls">
                        <button class="glass-btn" onclick="loadSchedule('default')">" 专</button>
                        <button class="glass-btn" onclick="loadSchedule('special')">" </button>
                    </div>
                </div>
                <div id="daily-schedule" class="feature-block">
                    <div class="tasks-container">
                        <!-- Tasks will be loaded here dynamically -->
                    </div>
                    <div class="schedule-actions">
                        <button class="glass-btn" onclick="toggleReminders()">
                            <i class="fa-solid fa-bell"></i> 驻注/ 转专转
                        </button>
                        <button class="glass-btn" onclick="exportSchedule()">
                            <i class="fa-solid fa-file-export"></i> 爪 "
                        </button>
                    </div>
                </div>
                <div class="reminders-panel">
                    <h4><i class="fa-solid fa-bell"></i> 转专转 驻注转</h4>
                    <div id="active-reminders">
                        <!-- Active reminders will be shown here -->
                    </div>
                </div>
            </div>
        </section>
        <!-- 注抓 驻转专 -->
        <section class="tab-content" id="tab-tree">
            <h2><i class="fa-solid fa-sitemap"></i> 注抓 驻转专</h2>
            <div id="buttonTree">
                <!-- Content will be populated by JavaScript -->
            </div>
        </section>
        <!-- 专转 -->
        <section class="tab-content" id="tab-settings">
            <div class="settings-group">
                <h3><i class="fa-solid fa-palette"></i> 注专转 砖</h3>
                <div class="theme-selector">
                    <div class="theme-option" onclick="setTheme('default')">
                        <div class="theme-preview" style="background: linear-gradient(45deg, #232526, #414345)"></div>
                        <span>专专转 </span>
                    </div>
                    <div class="theme-option" onclick="setTheme('night')">
                        <div class="theme-preview" style="background: linear-gradient(45deg, #1a1a2e, #16213e)"></div>
                        <span></span>
                    </div>
                    <div class="theme-option" onclick="setTheme('desert')">
                        <div class="theme-preview" style="background: linear-gradient(45deg, #2d2d1e, #3c3c2a)"></div>
                        <span>专</span>
                    </div>
                    <div class="theme-option" onclick="setTheme('cyber')">
                        <div class="theme-preview" style="background: linear-gradient(45deg, #1a1a2e, #2b1b3b)"></div>
                        <span>住专</span>
                    </div>
                </div>
            </div>

            <div class="settings-group">
                <h3><i class="fa-solid fa-language"></i> 砖驻</h3>
                <div class="language-selector">
                    <button class="lang-btn active" onclick="setLanguage('he')">注专转</button>
                    <button class="lang-btn" onclick="setLanguage('en')">English</button>
                </div>
            </div>

            <div class="settings-group">
                <h3><i class="fa-solid fa-volume-high"></i> 爪</h3>
                <div class="setting-item">
                    <label>爪 注专转:</label>
                    <input type="checkbox" id="systemSounds" checked>
                </div>
                <div class="setting-item">
                    <label>拽专转:</label>
                    <input type="checkbox" id="voiceNarration">
                </div>
            </div>

            <div class="settings-group">
                <h3><i class="fa-solid fa-file-import"></i> </h3>
                <div class="setting-item">
                    <label>转拽转 转转:</label>
                    <input type="file" id="imageFolder" webkitdirectory directory multiple>
                </div>
                <div class="setting-item">
                    <label>转拽转 爪:</label>
                    <input type="file" id="soundFolder" webkitdirectory directory multiple>
                </div>
            </div>
        </section>
        <!-- 拽 转 专祝 专砖转 -->
        <section id="emotion-chart-section" style="max-width: 400px; margin: 20px auto;">
            <h3>注拽 爪 专</h3>
            <canvas id="emotionChart" width="300" height="150"></canvas>
        </section>

        <!-- 爪  PDF -->
        <section id="export-section">
            <button onclick="exportPDF()">专  PDF</button>
        </section>

        <!-- 砖转 转 -->
        <section class="tab-content" id="tab-academic">
            <h2><i class="fa-solid fa-graduation-cap"></i> 砖转 转</h2>
            <div class="academic-tasks">
                <!-- Content will be populated by JavaScript -->
            </div>
        </section>
    </main>
    <script src="js/main.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // 注专 转转 注 转 住
        const jerusalemImages = [
            '/assets/images/jerusalem/1.jpeg',
            '/assets/images/jerusalem/2.jpeg',
            '/assets/images/jerusalem/3.jpeg',
            '/assets/images/jerusalem/4.jpeg',
            '/assets/images/jerusalem/5.jpeg'
        ];

        let currentImageIndex = 0;

        // 驻拽爪 爪转 转
        window.showImage = function(index) {
            const img = document.getElementById('mainImage');
            if (img) {
                img.src = jerusalemImages[index];
                console.log('Loading image:', jerusalemImages[index]); //  拽
            }
        }

        // 驻拽爪转  转转
        window.showNextImage = function() {
            currentImageIndex = (currentImageIndex + 1) % jerusalemImages.length;
            showImage(currentImageIndex);
        }

        window.showPreviousImage = function() {
            currentImageIndex = (currentImageIndex - 1 + jerusalemImages.length) % jerusalemImages.length;
            showImage(currentImageIndex);
        }

        window.showRandomImage = function() {
            const randomIndex = Math.floor(Math.random() * jerusalemImages.length);
            currentImageIndex = randomIndex;
            showImage(currentImageIndex);
        }

        // 爪转 转 专砖
        showImage(0);
    });

    function preloadImages() {
        // 注 拽 砖 转转 专砖
        jerusalemImages.forEach(src => {
            const img = new Image();
            img.src = src;
        });
    }

    window.onerror = function(msg, url, lineNo, columnNo, error) {
        console.error('砖:', {
            message: msg,
            url: url,
            line: lineNo,
            column: columnNo,
            error: error
        });
        return false;
    };

    // 驻 注转 转转
    function handleImageError(imgElement) {
        console.error('Failed to load image:', imgElement.src);
        imgElement.src = 'assets/images/default.jpg'; // 转转 专专转 
        imgElement.alt = '转  ';
    }

    function showWelcomeMessage() {
        const typed = new Typed('#typed-welcome', {
            strings: ['专  注专转!', ' 转专爪 注砖转 ?'],
            typeSpeed: 50,
            backSpeed: 30,
            loop: true
        });
    }

    function showLocationWithImage(type) {
        const locations = {
            'home': {
                text: '专砖, 砖专',
                image: '/assets/images/jerusalem/1.jpeg'
            }
        };

        const location = locations[type];
        if (!location) return;

        const locationInfo = document.querySelector('.location-info');
        const mediaContainer = document.querySelector('.media-container');
        
        if (locationInfo) {
            locationInfo.textContent = location.text;
        }
        
        if (mediaContainer) {
            mediaContainer.innerHTML = `<img src="${location.image}" alt="转转 拽" onerror="handleImageError(this)">`;
        }
    }

    function initializeButtonTree() {
        const treeContainer = document.getElementById('buttonTree');
        if (!treeContainer) return;

        const treeData = {
            '专砖': {
                '': {
                    '砖注专': ['转拽', '转', '驻拽'],
                    '转': ['砖注专 转', '驻专拽', '']
                },
                '驻注转': {
                    '住驻专': ['专', '砖', '专爪'],
                    '转': ['拽专', '爪专', '拽']
                }
            }
        };

        function createTreeElement(data) {
            const ul = document.createElement('ul');
            ul.className = 'tree-list';

            Object.entries(data).forEach(([key, value]) => {
                const li = document.createElement('li');
                const button = document.createElement('button');
                button.className = 'tree-button';
                button.textContent = key;

                if (typeof value === 'object' && !Array.isArray(value)) {
                    const subTree = createTreeElement(value);
                    button.addEventListener('click', () => {
                        subTree.style.display = 
                            subTree.style.display === 'none' ? 'block' : 'none';
                    });
                    li.appendChild(button);
                    li.appendChild(subTree);
                } else if (Array.isArray(value)) {
                    button.addEventListener('click', () => {
                        const existingList = li.querySelector('.leaf-list');
                        if (existingList) {
                            existingList.remove();
                        } else {
                            const leafList = document.createElement('ul');
                            leafList.className = 'leaf-list';
                            value.forEach(item => {
                                const leafLi = document.createElement('li');
                                leafLi.textContent = item;
                                leafList.appendChild(leafLi);
                            });
                            li.appendChild(leafList);
                        }
                    });
                    li.appendChild(button);
                }

                ul.appendChild(li);
            });

            return ul;
        }

        treeContainer.appendChild(createTreeElement(treeData));
    }

    // 住祝  
    window.initializeButtonTree = initializeButtonTree;

    // 住祝 驻 砖转 注转 拽爪 拽
    function handleAudioError(error) {
        console.warn('Failed to load audio file:', error);
    }

    // 住祝 驻拽爪转 注转 拽爪 拽
    function loadAudioFiles() {
        const audioFiles = [
            './project/assets/sounds/click.mp3',
            './project/assets/sounds/success.mp3',
            './project/assets/sounds/notification.mp3'
        ];

        audioFiles.forEach(file => {
            const audio = new Audio(file);
            audio.onerror = () => handleAudioError(file);
        });
    }

    const stations = [
        {
            name: '转 专转',
            buses: ['1', '2', '3'],
            times: ['10:00', '10:15', '10:30'],
            image: './project/assets/images/stations/central.jpg'
        },
        {
            name: '专转 拽',
            buses: ['4', '5', '6'],
            times: ['10:05', '10:20', '10:35'],
            image: './project/assets/images/stations/light-rail.jpg'
        }
    ];

    let currentStationIndex = 0;

    function updateStationDisplay(mode) {
        const stationContainer = document.querySelector('.bus-station');
        if (!stationContainer) return;

        if (mode === 'random') {
            currentStationIndex = Math.floor(Math.random() * stations.length);
        } else {
            currentStationIndex = (currentStationIndex + 1) % stations.length;
        }

        const station = stations[currentStationIndex];
        
        const html = `
            <div class="station-info">
                <h3>${station.name}</h3>
                <div class="bus-lines">
                    ${station.buses.map((bus, i) => `
                        <div class="bus-line">
                            <span class="bus-number">拽 ${bus}</span>
                            <span class="bus-time">${station.times[i]}</span>
                        </div>
                    `).join('')}
                </div>
            </div>
        `;

        stationContainer.innerHTML = html;
    }

    // 驻拽爪 驻 爪转 注 驻转专 转转
    function handleStationClick(mode) {
        if (mode === 'random') {
            currentStationIndex = Math.floor(Math.random() * stationData.length);
        } else if (mode === 'next') {
            currentStationIndex = (currentStationIndex + 1) % stationData.length;
        }

        updateStationDisplay();
    }

    // 住驻转 驻拽爪转  
    window.handleStationClick = handleStationClick;

    function showRandomJerusalemImage() {
        const images = [
            'project/assets/images/jerusalem/1.jpeg',
            'project/assets/images/jerusalem/2.jpeg',
            'project/assets/images/jerusalem/3.jpeg',
            'project/assets/images/jerusalem/4.jpeg',
            'project/assets/images/jerusalem/5.jpeg'
        ];
        const randomIndex = Math.floor(Math.random() * images.length);
        const imgElement = document.querySelector('.feature-result img');
        if (imgElement) {
            imgElement.src = images[randomIndex];
            imgElement.onerror = () => handleImageError(imgElement);
        }
    }

    // 住祝 驻拽爪转 注 拽
    function preloadJerusalemImages() {
        const images = [1, 2, 3, 4, 5].map(num => {
            const img = new Image();
            img.src = `assets/images/jerusalem/${num}.jpeg`;
            return img;
        });
    }

    // 驻注 注转 祝
    document.addEventListener('DOMContentLoaded', () => {
        preloadJerusalemImages();
        showRandomJerusalemImage(); // 爪 转 专砖转
    });

    function updateBusInfo(mode = 'next') {
        const busStopDiv = document.querySelector('.bus-stop');
        if (!busStopDiv) return;

        const busLines = [
            { number: '1', destination: '转 专转', arrival: '10:00' },
            { number: '2', destination: '专转 专', arrival: '10:15' },
            { number: '3', destination: '专住', arrival: '10:30' }
        ];

        let currentBusIndex = parseInt(busStopDiv.dataset.currentIndex || '0');
        
        if (mode === 'random') {
            currentBusIndex = Math.floor(Math.random() * busLines.length);
        } else {
            currentBusIndex = (currentBusIndex + 1) % busLines.length;
        }
        
        const bus = busLines[currentBusIndex];
        busStopDiv.dataset.currentIndex = currentBusIndex;
        
        busStopDiv.innerHTML = `
            <div class="bus-line">拽 ${bus.number}</div>
            <div class="bus-time">
                <div>注: ${bus.destination}</div>
                <div> 注: ${bus.arrival}</div>
            </div>
        `;
    }

    function playSound(soundType) {
        //  转 转 爪 注 砖住祝 转 拽爪
        return;
        
        /* 拽 拽专
        const sounds = {
            click: 'project/assets/sounds/click.mp3',
            success: 'project/assets/sounds/success.mp3',
            notification: 'project/assets/sounds/notification.mp3'
        };
        
        const audio = new Audio(sounds[soundType]);
        audio.play().catch(err => console.log('Sound disabled'));
        */
    }
    </script>
    <!-- 注 转 住 -->
    <audio id="clickSound" src="project/assets/sounds/click.mp3"></audio>
    <audio id="successSound" src="project/assets/sounds/success.mp3"></audio>
    <audio id="notificationSound" src="project/assets/sounds/notification.mp3"></audio>
</body>
</html> 