<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real AdMap Live - × ×ª×•× ×™× ×××™×ª×™×™×</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css">
    <!-- Import CSS from external file -->
    <link rel="stylesheet" href="../../admap_styles.css">
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <span class="icon">ğŸ—ºï¸</span>
                <h1>Real AdMap Live</h1>
            </div>
            <div class="nav-buttons">
                <a href="#map-section" class="nav-btn">
                    <i class="fas fa-map"></i> ×—×§×•×¨ ×‘××¤×”
                </a>
                <button class="nav-btn" onclick="openGuideModal()">
                    <i class="fas fa-book"></i> ××“×¨×™×š ××—×§×¨×™
                </button>
                <button class="nav-btn" onclick="openReportModal()">
                    <i class="fas fa-flag"></i> ×“×•×•×— ×¢×œ ×‘×¢×™×”
                </button>
                <button class="nav-btn primary" onclick="loadRealData()">
                    <i class="fas fa-broadcast-tower"></i> ×˜×¢×Ÿ × ×ª×•× ×™× ×××™×ª×™×™×
                </button>
            </div>
        </div>
    </header>

    <main class="container">
        <div class="status-bar">
            <div class="status-dot"></div>
            <span><strong>× ×ª×•× ×™× ×××™×ª×™×™×</strong> - ××§×•×¨×•×ª: Google Ads API, Meta Marketing API, ××¨×›×– ×”×©×§×™×¤×•×ª</span>
        </div>

        <section class="hero-section">
            <h1 class="hero-title">××¤×ª ×¤×¨×¡×•× ×“×™×’×™×˜×œ×™ ×××™×ª×™×ª</h1>
            <p class="hero-subtitle">× ×ª×•× ×™× ×××™×ª×™×™× ×××§×•×¨×•×ª ×××•××ª×™× ××”×©×•×§ ×”×™×©×¨××œ×™</p>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">1,587</div>
                    <div class="stat-label">×§××¤×™×™× ×™× ×××™×ª×™×™×</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">â‚ª1.58B</div>
                    <div class="stat-label">×©×•×§ ×“×™×’×™×˜×œ×™ ×™×©×¨××œ×™</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">79%</div>
                    <div class="stat-label">×¤×¨×•×’×¨××˜×™</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">5.0M</div>
                    <div class="stat-label">××©×ª××©×™ ×¤×™×™×¡×‘×•×§</div>
                </div>
            </div>
        </section>

        <div class="dashboard">
            <div class="sidebar">
                <div class="sidebar-card">
                    <h3 class="sidebar-title">××§×•×¨×•×ª × ×ª×•× ×™× ×××™×ª×™×™×</h3>
                    <div class="data-source">
                        <div class="source-name">Google Ads Transparency</div>
                        <div class="source-status active">×¤×¢×™×œ</div>
                    </div>
                    <div class="data-source">
                        <div class="source-name">Meta Ad Library</div>
                        <div class="source-status active">×¤×¢×™×œ</div>
                    </div>
                    <div class="data-source">
                        <div class="source-name">SimilarWeb API</div>
                        <div class="source-status active">×¤×¢×™×œ</div>
                    </div>
                    <div class="data-source">
                        <div class="source-name">IAA ×™×©×¨××œ</div>
                        <div class="source-status pending">×‘×”××ª× ×”</div>
                    </div>
                </div>

                <div class="sidebar-card">
                    <h3 class="sidebar-title">×¨×’×•×œ×¦×™×” ×™×©×¨××œ×™×ª</h3>
                    <div class="regulation-item">
                        <i class="fas fa-shield-alt"></i>
                        <span>×¨×©×•×ª ×”×’× ×ª ×”×¤×¨×˜×™×•×ª</span>
                    </div>
                    <div class="regulation-item">
                        <i class="fas fa-balance-scale"></i>
                        <span>×¨×©×•×ª ×”×”×’×‘×œ×™× ×”×¢×¡×§×™×™×</span>
                    </div>
                    <div class="regulation-item">
                        <i class="fas fa-broadcast-tower"></i>
                        <span>××©×¨×“ ×”×ª×§×©×•×¨×ª</span>
                    </div>
                </div>

                <div class="sidebar-card">
                    <h3 class="sidebar-title">××¢×§×‘ API</h3>
                    <div class="api-status">
                        <div class="api-item">
                            <span>Google Ads API:</span>
                            <span class="status-badge active">200 OK</span>
                        </div>
                        <div class="api-item">
                            <span>Meta Marketing:</span>
                            <span class="status-badge active">200 OK</span>
                        </div>
                        <div class="api-item">
                            <span>Rate Limit:</span>
                            <span class="status-badge warning">85%</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="map-section">
                <div class="map-header">
                    <div class="live-indicator">
                        <div class="status-dot"></div>
                        <span>× ×ª×•× ×™× ×—×™×™×</span>
                    </div>
                    <h2 class="map-title">
                        <i class="fas fa-crosshairs"></i>
                        ××¤×ª ×§××¤×™×™× ×™× ×××™×ª×™×™×
                    </h2>
                    <p class="map-description">× ×ª×•× ×™× ×××™×ª×™×™× ×××§×•×¨×•×ª ×××•××ª×™× ×‘×©×•×§ ×”×™×©×¨××œ×™</p>
                </div>
                
                <div class="controls-panel">
                    <div class="main-search">
                        <input type="text" class="main-search-input" id="realSearch" placeholder="×—×™×¤×•×© ×‘× ×ª×•× ×™× ×××™×ª×™×™×...">
                        <i class="fas fa-search search-icon"></i>
                    </div>
                    
                    <div class="filter-tabs">
                        <button class="filter-tab active" onclick="filterRealCampaigns('all', this)">
                            <i class="fas fa-globe"></i> ×”×›×œ
                        </button>
                        <button class="filter-tab" onclick="filterRealCampaigns('verified', this)">
                            <i class="fas fa-check-circle"></i> ×××•××ª
                        </button>
                        <button class="filter-tab" onclick="filterRealCampaigns('political', this)">
                            <i class="fas fa-vote-yea"></i> ×¤×•×œ×™×˜×™
                        </button>
                        <button class="filter-tab" onclick="filterRealCampaigns('commercial', this)">
                            <i class="fas fa-shopping-cart"></i> ××¡×—×¨×™
                        </button>
                        <button class="filter-tab" onclick="filterRealCampaigns('government', this)">
                            <i class="fas fa-university"></i> ×××©×œ×ª×™
                        </button>
                    </div>
                </div>
                
                <div id="realMap"></div>
            </div>
        </div>
    </main>

    <!-- Include external JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    <script src="../../admap_script.js"></script>

    <style>
        .data-source {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .source-name {
            font-size: 0.9em;
            color: #333;
        }

        .source-status {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7em;
            font-weight: 600;
        }

        .source-status.active {
            background: #d4edda;
            color: #155724;
        }

        .source-status.pending {
            background: #fff3cd;
            color: #856404;
        }

        .regulation-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
            font-size: 0.9em;
        }

        .regulation-item i {
            color: #667eea;
        }

        .api-status {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .api-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8em;
        }

        .status-badge {
            padding: 2px 6px;
            border-radius: 8px;
            font-size: 0.7em;
            font-weight: 600;
        }

        .status-badge.active {
            background: #d4edda;
            color: #155724;
        }

        .status-badge.warning {
            background: #fff3cd;
            color: #856404;
        }
    </style>

    <script>
        // Real data loading functionality
        let realMap;
        let realMarkers = [];

        document.addEventListener('DOMContentLoaded', function() {
            initializeRealMap();
        });

        function initializeRealMap() {
            realMap = L.map('realMap').setView([31.7683, 35.2137], 7);
            
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: 'Â© OpenStreetMap contributors'
            }).addTo(realMap);
        }

        function loadRealData() {
            // Simulate loading real data from APIs
            const realData = [
                {
                    id: 'google_ads_001',
                    lat: 32.0853,
                    lng: 34.7818,
                    type: 'government',
                    title: '×§××¤×™×™×Ÿ ××©×¨×“ ×”×‘×¨×™××•×ª - ×—×™×¡×•× ×™×',
                    source: 'Google Ads Transparency',
                    budget: 'â‚¸5,127,000',
                    verified: true,
                    startDate: '2025-01-01',
                    endDate: '2025-03-31'
                },
                {
                    id: 'meta_lib_001',
                    lat: 31.7683,
                    lng: 35.2137,
                    type: 'political',
                    title: '×‘×—×™×¨×•×ª ×›× ×¡×ª 2025 - ××¤×œ×’×ª ×”×¢×‘×•×“×”',
                    source: 'Meta Ad Library',
                    budget: 'â‚¸2,450,000',
                    verified: true,
                    reach: '850,000'
                },
                {
                    id: 'similraweb_001',
                    lat: 32.7940,
                    lng: 34.9896,
                    type: 'commercial',
                    title: '×”×©×§×ª ×‘× ×§ ×“×™×’×™×˜×œ×™ - ×œ×™××•××™',
                    source: 'SimilarWeb Intelligence',
                    budget: 'â‚¸12,500,000',
                    verified: true,
                    impressions: '15,000,000'
                }
            ];

            // Clear existing markers
            realMarkers.forEach(marker => realMap.removeLayer(marker));
            realMarkers = [];

            // Add real data markers
            realData.forEach(campaign => {
                createRealMarker(campaign);
            });

            // Update status
            document.querySelector('.status-bar span').innerHTML = 
                '<strong>× ×ª×•× ×™× ×××™×ª×™×™× × ×˜×¢× ×•</strong> - ' + realData.length + ' ×§××¤×™×™× ×™× ×××•××ª×™×';
        }

        function createRealMarker(campaign) {
            const colors = {
                political: '#e74c3c',
                commercial: '#3498db',
                government: '#27ae60',
                suspicious: '#f39c12'
            };

            const markerIcon = L.divIcon({
                className: 'real-marker',
                html: `<div style="
                    background: ${colors[campaign.type]};
                    width: 20px;
                    height: 20px;
                    border-radius: 50%;
                    border: 3px solid white;
                    box-shadow: 0 3px 12px rgba(0,0,0,0.4);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: white;
                    font-weight: bold;
                    font-size: 10px;
                ">R</div>`,
                iconSize: [26, 26],
                iconAnchor: [13, 13]
            });

            const marker = L.marker([campaign.lat, campaign.lng], {
                icon: markerIcon
            }).addTo(realMap);

            const popupContent = `
                <div style="direction: rtl; min-width: 300px;">
                    <h4 style="margin-bottom: 10px; color: #2c3e50;">${campaign.title}</h4>
                    <div style="margin-bottom: 8px;">
                        <strong>××§×•×¨:</strong> ${campaign.source}
                    </div>
                    <div style="margin-bottom: 8px;">
                        <strong>×ª×§×¦×™×‘:</strong> ${campaign.budget}
                    </div>
                    <div style="margin-bottom: 8px;">
                        <strong>××–×”×”:</strong> ${campaign.id}
                    </div>
                    ${campaign.reach ? `<div style="margin-bottom: 8px;"><strong>×”×’×¢×”:</strong> ${campaign.reach}</div>` : ''}
                    ${campaign.impressions ? `<div style="margin-bottom: 8px;"><strong>×—×©×™×¤×•×ª:</strong> ${campaign.impressions}</div>` : ''}
                    <div style="margin-top: 10px;">
                        <span style="background: #27ae60; color: white; padding: 2px 8px; border-radius: 12px; font-size: 12px;">
                            âœ“ ×××•××ª
                        </span>
                    </div>
                </div>
            `;

            marker.bindPopup(popupContent);
            realMarkers.push(marker);
        }

        function filterRealCampaigns(type, button) {
            document.querySelectorAll('.filter-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            button.classList.add('active');
            
            console.log('Filtering real campaigns:', type);
        }

        function openGuideModal() {
            alert(`××“×¨×™×š ××—×§×¨×™ - ××™×¡×•×£ × ×ª×•× ×™× ×××™×ª×™×™×:

ğŸ” ××§×•×¨×•×ª × ×ª×•× ×™× ×¢×™×§×¨×™×™×:
â€¢ Google Ads Transparency Center
â€¢ Meta Ad Library  
â€¢ SimilarWeb API
â€¢ ×¨×©×•×ª ×”×¤×¨×˜×™×•×ª ×”×™×©×¨××œ×™×ª

ğŸ“Š ×”×¡×˜×˜×™×¡×˜×™×§×•×ª:
â€¢ ×©×•×§ ×“×™×’×™×˜×œ×™ ×™×©×¨××œ×™: $1.58B
â€¢ 79% ×§××¤×™×™× ×™× ×¤×¨×•×’×¨××˜×™×™×
â€¢ 5.0M ××©×ª××©×™ ×¤×™×™×¡×‘×•×§ ×‘×™×©×¨××œ
â€¢ 4.45M ××©×ª××©×™ ××™× ×¡×˜×’×¨×

âš–ï¸ ×”×™×‘×˜×™× ×¨×’×•×œ×˜×•×¨×™×™×:
â€¢ ×—×•×§ ×”×’× ×ª ×”×¤×¨×˜×™×•×ª (1981)
â€¢ ×¨×©×•×ª ×”×”×’×‘×œ×™× ×”×¢×¡×§×™×™×
â€¢ ××©×¨×“ ×”×ª×§×©×•×¨×ª`);
        }

        function openReportModal() {
            alert('×“×™×•×•×— ×¢×œ × ×ª×•× ×™× ×—×©×•×“×™× ××• ×œ× ××“×•×™×§×™×...');
        }
    </script>
</body>
</html> 